var f=Object.defineProperty;var R=t=>f(t,"__esModule",{value:!0});var q=(t,e)=>{R(t);for(var s in e)f(t,s,{get:e[s],enumerable:!0})};q(exports,{ListStore:()=>d,Store:()=>c,default:()=>z,empty:()=>A,escape:()=>u,extend:()=>h,insert:()=>v,mustache:()=>b,nu:()=>g,onload:()=>m,rm:()=>O,select:()=>E,selectAll:()=>j,template:()=>p,unescape:()=>_});var L=t=>{var e;let s=t?t.match(/([0-9a-zA-Z\-]*)?(#[0-9a-zA-Z\-]*)?((.[0-9a-zA-Z\-]+)*)/):void 0,r=s?(e=s.slice(1,4))===null||e===void 0?void 0:e.map(n=>n?n.trim():void 0):Array(3).fill(void 0);return r&&r[1]&&(r[1]=r[1].replace(/#*/g,"")),s?{tag:r[0]||void 0,id:r[1]||void 0,classes:r[2]?r[2].split(".").filter(n=>n.trim()):void 0}:{}},h=(t,e={})=>{let{contents:s,c:r,misc:n,m:i,style:a,s:C,on:w,attrs:x,a:k,raw:y}=e;return s=s||r||"",s=y?s:u(s),t.innerHTML=s,Object.assign(t,n||i),Object.assign(t.style,a||C),Object.entries(w||{}).forEach(([o,l])=>t.addEventListener(o,l)),Object.entries(x||k||{}).forEach(([o,l])=>t.setAttribute(o,l)),t},g=(t,e={})=>{let{tag:s,id:r,classes:n}=L(t);s||(s="div");let i=document.createElement(s);return r&&(i.id=r),(n||[]).forEach(a=>i.classList.add(a)),h(i,e)},v=(t,e)=>{if(Object.keys(e).length!==1)throw new Error("Too many or too few positions specified.");let r=Object.values(e)[0],n="afterend";return e.after?n="afterend":e.before?n="beforebegin":e.atStartOf?n="afterbegin":e.atEndOf&&(n="beforeend"),r.insertAdjacentElement(n,t),t},c=class{constructor(e){this.value=null,this._subscribers={},this._subscriberCounts={},this._dead=!1,this.value=e}on(e,s,r=!1){return this._subscriberCounts[e]=this._subscriberCounts[e]||0,this._subscribers[e]=this._subscribers[e]||{},this._subscribers[e][this._subscriberCounts[e]]=s,r&&!["push","remove","mutation","setAt"].includes(e)&&s(this.value),this._subscriberCounts[e]++}unsubscribe(e,s){delete this._subscribers[e][s]}update(e){this._dead||(this.value=e,this._sendEvent("update",e))}refresh(){this._sendEvent("refresh",this.value)}_sendEvent(e,s){if(!this._dead){this._subscribers[e]=this._subscribers[e]||{};for(let r in Object.keys(this._subscribers[e]))this._subscribers[e][r](s)}}dispose(){this._dead=!0,this._subscribers={},this._subscriberCounts={}}},d=class extends c{constructor(e){super(e)}clear(){this.update([])}push(e){this.value.push(e),this._sendEvent("push",{value:e,idx:this.value.length-1})}remove(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this._sendEvent("remove",{value:this.value.splice(e,1)[0],idx:e})}get(e){if(e<0||e>this.value.length)throw new RangeError("Invalid index.");return this.value instanceof Array&&this.value[e]}setAt(e,s){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this.value[e]=s,this._sendEvent("mutation",{value:s,idx:e})}get length(){return this.value.length}},S=(t,e={})=>{let s=new RegExp("\\\\({{\\s*"+Object.keys(e).join("|")+"\\s*}})","gi");return new RegExp(Object.keys(e).join("|"),"gi"),t.replace(new RegExp("(^|[^\\\\]){{\\s*("+Object.keys(e).join("|")+")\\s*}}","gi"),function(r,n,i){return`${n||""}${e[i]}`}).replace(s,"$1")},b=(t,e={},s=!0)=>{let r=Object.assign({},e);return s&&(r=Object.fromEntries(Object.entries(r).map(([n,i])=>[n,u(i)]))),S(t,r)},p=(t,e=!0)=>s=>b(t,s,e),u=t=>t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"",_=t=>{if(!t)return"";let e=/&(?:amp|lt|gt|quot|#(0+)?39);/g,s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return t.replace(e,r=>s[r]||"'")},m=t=>globalThis.addEventListener("DOMContentLoaded",t),E=t=>document.querySelector(t),j=t=>Array.from(document.querySelectorAll(t)),O=t=>t.remove(),A=t=>{for(;t.lastChild;)t.removeChild(t.lastChild)},z={Store:c,ListStore:d,nu:g,mustache:b,template:p,escape:u,unescape:_,extend:h,insert:v,empty:A,rm:O,selectAll:j,select:E,onload:m};
