var p=Object.defineProperty;var I=t=>p(t,"__esModule",{value:!0});var Z=(t,e)=>{I(t);for(var s in e)p(t,s,{get:e[s],enumerable:!0})};Z(exports,{default:()=>F,empty:()=>x,escape:()=>a,extend:()=>h,html:()=>g,insert:()=>E,mustache:()=>f,nu:()=>_,onload:()=>O,r:()=>b,rm:()=>R,select:()=>A,seq:()=>q,store:()=>C,template:()=>j,unescape:()=>w});var b=(t,e)=>{var s;return{raw:!0,contents:Array.isArray(t)?t.join((s=e==null?void 0:e.joiner)!==null&&s!==void 0?s:" "):t.toString()}},g=(t,...e)=>{let s=[];for(let n=0;n<t.length;n++){s.push(t[n]||"");let r=e[n];typeof r!="undefined"&&typeof r!="object"?s.push(a((r||"").toString())):s.push((r==null?void 0:r.contents)||"")}return s.join("")},D=t=>{var e;let s=t?t.match(/([0-9a-zA-Z\-]*)?(#[0-9a-zA-Z\-]*)?((.[0-9a-zA-Z\-]+)*)/):void 0,n=s?(e=s.slice(1,4))===null||e===void 0?void 0:e.map(r=>r?r.trim():void 0):Array(3).fill(void 0);return n&&n[1]&&(n[1]=n[1].replace(/#*/g,"")),s?{tag:n[0]||void 0,id:n[1]||void 0,classes:n[2]?n[2].split(".").filter(r=>r.trim()):void 0}:{}},h=(t,e={})=>{let{contents:s,c:n,misc:r,m:i,style:u,s:L,on:S,attrs:M,a:k,raw:T,g:$,gimme:z}=e,v=[t];s=s||n||"",s=T?s:a(s),s&&(t.innerHTML=s),Object.assign(t,r||i),Object.assign(t.style,u||L);let c=z||$||[];if(c&&c.length)for(let o of c)v.push(t.querySelector(o));return Object.entries(S||{}).forEach(([o,d])=>t.addEventListener(o,d)),Object.entries(M||k||{}).forEach(([o,d])=>t.setAttribute(o,d)),v},_=(t,e={})=>{let{tag:s,id:n,classes:r}=D(t);if(r==null?void 0:r.some(u=>u.includes("#")))throw new Error("Error: Found # in a class name. Did you mean to do elt#id.classes instead of elt.classes#id?");s||(s="div");let i=document.createElement(s);return n&&(i.id=n),(r||[]).forEach(u=>i.classList.add(u)),h(i,e)},E=(t,e)=>{if(Object.keys(e).length!==1)throw new Error("Too many or too few positions specified.");let n="beforeend",r;return"after"in e?(n="afterend",r=e.after):"before"in e?(n="beforebegin",r=e.before):("into"in e&&e.at==="start"&&(n="afterbegin"),r=e.into),r.insertAdjacentElement(n,t),t},l=class{constructor(e){this._subscribers={},this._subscriberCounts={},this._dead=!1,e&&(this.value=e)}on(e,s,n=!1){var r,i;return this._subscriberCounts[e]=this._subscriberCounts[e]||0,(r=(i=this._subscribers)[e])!==null&&r!==void 0||(i[e]={}),this._subscribers[e][this._subscriberCounts[e]]=s,n&&!["push","remove","mutation","setAt"].includes(e)&&s({type:"change",value:this.value}),this._subscriberCounts[e]++}unsubscribe(e,s){var n;(n=this._subscribers[e])===null||n===void 0||delete n[s]}update(e){this._dead||(this.value=e,this._sendEvent({type:"change",value:e}))}_sendEvent(e){if(this._dead)return;this._subscribers[e.type]=this._subscribers[e.type]||{};let s=this._subscribers[e.type];if(!!s)for(let n in Object.keys(s))s[n](e)}dispose(){this._dead=!0,this._subscribers={},this._subscriberCounts={}}},y=class extends l{constructor(e){super(e)}clear(){this.value=[],this._sendEvent({type:"clear"})}push(e){return this.value.push(e),this._sendEvent({type:"append",value:e,idx:this.value.length-1}),this.value.length}remove(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this._sendEvent({type:"deletion",idx:e,value:this.value.splice(e,1)[0]})}get(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");return this.value[e]}set(e,s){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this.value[e]=s,this._sendEvent({type:"change",value:s,idx:e})}get length(){return this.value.length}},m=class extends l{constructor(e){super(new Map);for(let[s,n]of Object.entries(e||{}))this.value.set(s,n)}set(e,s){this.value.set(e,s),this._sendEvent({key:e,value:s,type:"change"})}update(){}remove(e){this.value.delete(e),this._sendEvent({key:e,value:this.value,type:"deletion"})}clear(){this.value=new Map,this._sendEvent({type:"clear"})}transform(e,s){let n=this.value.get(e);if(!n)throw new Error(`ERROR: key ${e} does not exist in store!`);let r=s(n);this.set(e,r),this._sendEvent({type:"change",value:r,key:e})}get(e){return this.value.get(e)}has(e){return this.value.has(e)}entries(){return this.value.entries()}},H=(t,e={})=>{let s=new RegExp("\\\\({{\\s*"+Object.keys(e).join("|")+"\\s*}})","gi");return new RegExp(Object.keys(e).join("|"),"gi"),t.replace(new RegExp("(^|[^\\\\]){{\\s*("+Object.keys(e).join("|")+")\\s*}}","gi"),function(n,r,i){return`${r||""}${e[i]}`}).replace(s,"$1")},f=(t,e={},s=!0)=>{let n=Object.assign({},e);return s&&(n=Object.fromEntries(Object.entries(n).map(([r,i])=>[r,a(i)]))),H(t,n)},j=(t,e=!0)=>s=>f(t,s,e),a=t=>t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"",w=t=>{if(!t)return"";let e=/&(?:amp|lt|gt|quot|#(0+)?39);/g,s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return t.replace(e,n=>s[n]||"'")},O=t=>globalThis.addEventListener("DOMContentLoaded",t),A=({selector:t,all:e,from:s})=>(s!=null||(s=document),e?Array.from(s.querySelectorAll(t)):[s.querySelector(t)]),R=t=>t.remove(),x=t=>{t.innerHTML=""},q=(...t)=>{let e=0,s=t[0],n=1;typeof t[1]!="undefined"&&(e=t[0],s=t[1]),t[2]&&(n=t[2]);let r=[];for(let i=e;i<s;i+=n)r.push(i);return r},C=t=>{if("type"in t){if(t.type==="list")return new y(t.value);if(t.type==="map")return new m(t.value)}return new l(t.value)},F={store:C,nu:_,mustache:f,template:j,escape:a,unescape:w,extend:h,insert:E,empty:x,rm:R,select:A,onload:O,html:g,r:b,seq:q};
