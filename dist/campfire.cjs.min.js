var _=Object.defineProperty;var x=t=>_(t,"__esModule",{value:!0});var C=(t,e)=>{x(t);for(var s in e)_(t,s,{get:e[s],enumerable:!0})};C(exports,{ListStore:()=>b,Store:()=>l,default:()=>R,escape:()=>E,mustache:()=>f,nu:()=>p,template:()=>m,unescape:()=>j});var O=t=>{var e;let s=t?t.match(/([0-9a-zA-Z\-]*)?(#[0-9a-zA-Z\-]*)?((.[0-9a-zA-Z\-]+)*)/):void 0,i=s?(e=s.slice(1,4))===null||e===void 0?void 0:e.map(r=>r?r.trim():void 0):Array(3).fill(void 0);return i&&i[1]&&(i[1]=i[1].replace(/#*/g,"")),s?{tag:i[0]||void 0,id:i[1]||void 0,classes:i[2]?i[2].split(".").filter(r=>r.trim()):void 0}:{}},p=(t,e={})=>{let{innerHTML:s,i,misc:r,m:h,style:c,s:w,on:o,attrs:a,a:A}=e,{tag:d,id:g,classes:v}=O(t);d||(d="div");let n=document.createElement(d);if(g&&(n.id=g),v&&v.forEach(u=>n.classList.add(u)),s=s||i,r=r||h,c=c||w,a=a||A,s&&(n.innerHTML=s),r&&Object.assign(n,r),c&&Object.assign(n.style,c),o)for(let u in o)n.addEventListener(u,o[u]);if(a)for(let u in a)n.setAttribute(u,a[u]);return n},l=class{constructor(e){this.value=null,this._subscribers={},this._subscriberCounts={},this._dead=!1,this.value=e}on(e,s,i=!1){return this._subscriberCounts[e]=this._subscriberCounts[e]||0,this._subscribers[e]=this._subscribers[e]||{},this._subscribers[e][this._subscriberCounts[e]]=s,i&&!["push","remove","mutation","setAt"].includes(e)&&s(this.value),this._subscriberCounts[e]++}unsubscribe(e,s){delete this._subscribers[e][s]}update(e){this._dead||(this.value=e,this._sendEvent("update",e))}refresh(){this._sendEvent("refresh",this.value)}_sendEvent(e,s){if(!this._dead){this._subscribers[e]=this._subscribers[e]||{};for(let i in Object.keys(this._subscribers[e]))this._subscribers[e][i](s)}}dispose(){this._dead=!0,this._subscribers={},this._subscriberCounts={}}},b=class extends l{constructor(e){super(e)}clear(){this.update([])}push(e){this.value.push(e),this._sendEvent("push",{value:e,idx:this.value.length-1})}remove(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this._sendEvent("remove",{value:this.value.splice(e,1)[0],idx:e})}get(e){if(e<0||e>this.value.length)throw new RangeError("Invalid index.");return this.value instanceof Array&&this.value[e]}setAt(e,s){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this.value[e]=s,this._sendEvent("mutation",{value:s,idx:e})}get length(){return this.value.length}},f=(t,e={})=>{let s=new RegExp("\\\\({{\\s*"+Object.keys(e).join("|")+"\\s*}})","gi");return new RegExp(Object.keys(e).join("|"),"gi"),t.replace(new RegExp("(^|[^\\\\]){{\\s*("+Object.keys(e).join("|")+")\\s*}}","gi"),function(i,r,h){return`${r||""}${e[h]}`}).replace(s,"$1")},m=t=>e=>f(t,e),E=t=>t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"",j=t=>{if(!t)return"";let e=/&(?:amp|lt|gt|quot|#(0+)?39);/g,s={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return t.replace(e,i=>s[i]||"'")},R={Store:l,ListStore:b,nu:p,mustache:f,template:m,escape:E,unescape:j};
