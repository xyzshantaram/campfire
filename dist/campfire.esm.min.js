var O=(s,e)=>{var t;return{raw:!0,contents:Array.isArray(s)?s.join((t=e==null?void 0:e.joiner)!==null&&t!==void 0?t:" "):s.toString()}},A=(s,...e)=>{let t=[];for(let n=0;n<s.length;n++){t.push(s[n]||"");let r=e[n];typeof r!="undefined"&&typeof r!="object"?t.push(l((r||"").toString())):t.push((r==null?void 0:r.contents)||"")}return t.join("")},R=s=>{var e;let t=s?s.match(/([0-9a-zA-Z\-]*)?(#[0-9a-zA-Z\-]*)?((.[0-9a-zA-Z\-]+)*)/):void 0,n=t?(e=t.slice(1,4))===null||e===void 0?void 0:e.map(r=>r?r.trim():void 0):Array(3).fill(void 0);return n&&n[1]&&(n[1]=n[1].replace(/#*/g,"")),t?{tag:n[0]||void 0,id:n[1]||void 0,classes:n[2]?n[2].split(".").filter(r=>r.trim()):void 0}:{}},f=(s,e={})=>{let{contents:t,c:n,misc:r,m:i,style:u,s:g,on:_,attrs:E,a:y,raw:m,g:j,gimme:w}=e,h=[s];t=t||n||"",t=m?t:l(t),t&&(s.innerHTML=t),Object.assign(s,r||i),Object.assign(s.style,u||g);let c=w||j||[];if(c&&c.length)for(let o of c)h.push(s.querySelector(o));return Object.entries(_||{}).forEach(([o,d])=>s.addEventListener(o,d)),Object.entries(E||y||{}).forEach(([o,d])=>s.setAttribute(o,d)),h},x=(s,e={})=>{let{tag:t,id:n,classes:r}=R(s);if(r==null?void 0:r.some(u=>u.includes("#")))throw new Error("Error: Found # in a class name. Did you mean to do elt#id.classes instead of elt.classes#id?");t||(t="div");let i=document.createElement(t);return n&&(i.id=n),(r||[]).forEach(u=>i.classList.add(u)),f(i,e)},q=(s,e)=>{if(Object.keys(e).length!==1)throw new Error("Too many or too few positions specified.");let n="beforeend",r;return"after"in e?(n="afterend",r=e.after):"before"in e?(n="beforebegin",r=e.before):("into"in e&&e.at==="start"&&(n="afterbegin"),r=e.into),r.insertAdjacentElement(n,s),s},a=class{constructor(e){this._subscribers={},this._subscriberCounts={},this._dead=!1,e&&(this.value=e)}on(e,t,n=!1){var r,i;return this._subscriberCounts[e]=this._subscriberCounts[e]||0,(r=(i=this._subscribers)[e])!==null&&r!==void 0||(i[e]={}),this._subscribers[e][this._subscriberCounts[e]]=t,n&&!["push","remove","mutation","setAt"].includes(e)&&t({type:"change",value:this.value}),this._subscriberCounts[e]++}unsubscribe(e,t){var n;(n=this._subscribers[e])===null||n===void 0||delete n[t]}update(e){this._dead||(this.value=e,this._sendEvent({type:"change",value:e}))}_sendEvent(e){if(this._dead)return;this._subscribers[e.type]=this._subscribers[e.type]||{};let t=this._subscribers[e.type];if(!!t)for(let n in Object.keys(t))t[n](e)}dispose(){this._dead=!0,this._subscribers={},this._subscriberCounts={}}},v=class extends a{constructor(e){super(e)}clear(){this.value=[],this._sendEvent({type:"clear"})}push(e){return this.value.push(e),this._sendEvent({type:"append",value:e,idx:this.value.length-1}),this.value.length}remove(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this._sendEvent({type:"deletion",idx:e,value:this.value.splice(e,1)[0]})}get(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");return this.value[e]}set(e,t){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this.value[e]=t,this._sendEvent({type:"change",value:t,idx:e})}get length(){return this.value.length}},p=class extends a{constructor(e){super(new Map);for(let[t,n]of Object.entries(e||{}))this.value.set(t,n)}set(e,t){this.value.set(e,t),this._sendEvent({key:e,value:t,type:"change"})}update(){}remove(e){this.value.delete(e),this._sendEvent({key:e,value:this.value,type:"deletion"})}clear(){this.value=new Map,this._sendEvent({type:"clear"})}transform(e,t){let n=this.value.get(e);if(!n)throw new Error(`ERROR: key ${e} does not exist in store!`);let r=t(n);this.set(e,r),this._sendEvent({type:"change",value:r,key:e})}get(e){return this.value.get(e)}has(e){return this.value.has(e)}entries(){return this.value.entries()}},C=(s,e={})=>{let t=new RegExp("\\\\({{\\s*"+Object.keys(e).join("|")+"\\s*}})","gi");return new RegExp(Object.keys(e).join("|"),"gi"),s.replace(new RegExp("(^|[^\\\\]){{\\s*("+Object.keys(e).join("|")+")\\s*}}","gi"),function(n,r,i){return`${r||""}${e[i]}`}).replace(t,"$1")},b=(s,e={},t=!0)=>{let n=Object.assign({},e);return t&&(n=Object.fromEntries(Object.entries(n).map(([r,i])=>[r,l(i)]))),C(s,n)},L=(s,e=!0)=>t=>b(s,t,e),l=s=>s?s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"",S=s=>{if(!s)return"";let e=/&(?:amp|lt|gt|quot|#(0+)?39);/g,t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return s.replace(e,n=>t[n]||"'")},M=s=>globalThis.addEventListener("DOMContentLoaded",s),k=({selector:s,all:e,from:t})=>(t!=null||(t=document),e?Array.from(t.querySelectorAll(s)):[t.querySelector(s)]),T=s=>s.remove(),$=s=>{s.innerHTML=""},z=(...s)=>{let e=0,t=s[0],n=1;typeof s[1]!="undefined"&&(e=s[0],t=s[1]),s[2]&&(n=s[2]);let r=[];for(let i=e;i<t;i+=n)r.push(i);return r},I=s=>{if("type"in s){if(s.type==="list")return new v(s.value);if(s.type==="map")return new p(s.value)}return new a(s.value)},Z={store:I,nu:x,mustache:b,template:L,escape:l,unescape:S,extend:f,insert:q,empty:$,rm:T,select:k,onload:M,html:A,r:O,seq:z};export{Z as default,$ as empty,l as escape,f as extend,A as html,q as insert,b as mustache,x as nu,M as onload,O as r,T as rm,k as select,z as seq,I as store,L as template,S as unescape};
