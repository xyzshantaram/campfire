var m=s=>{var e;let t=s?s.match(/([0-9a-zA-Z\-]*)?(#[0-9a-zA-Z\-]*)?((.[0-9a-zA-Z\-]+)*)/):void 0,r=t?(e=t.slice(1,4))===null||e===void 0?void 0:e.map(n=>n?n.trim():void 0):Array(3).fill(void 0);return r&&r[1]&&(r[1]=r[1].replace(/#*/g,"")),t?{tag:r[0]||void 0,id:r[1]||void 0,classes:r[2]?r[2].split(".").filter(n=>n.trim()):void 0}:{}},h=(s,e={})=>{let{contents:t,c:r,misc:n,m:i,style:c,s:f,on:g,attrs:p,a:v,raw:_}=e;return t=t||r||"",t=_?t:l(t),s.innerHTML=t,Object.assign(s,n||i),Object.assign(s.style,c||f),Object.entries(g||{}).forEach(([u,a])=>s.addEventListener(u,a)),Object.entries(p||v||{}).forEach(([u,a])=>s.setAttribute(u,a)),s},E=(s,e={})=>{let{tag:t,id:r,classes:n}=m(s);t||(t="div");let i=document.createElement(t);return r&&(i.id=r),(n||[]).forEach(c=>i.classList.add(c)),h(i,e)},j=(s,e)=>{if(Object.keys(e).length!==1)throw new Error("Too many or too few positions specified.");let r=Object.values(e)[0],n="afterend";return e.after?n="afterend":e.before?n="beforebegin":e.prependTo?n="afterbegin":e.appendTo&&(n="beforeend"),r.insertAdjacentElement(n,s),s},o=class{constructor(e){this.value=null,this._subscribers={},this._subscriberCounts={},this._dead=!1,this.value=e}on(e,t,r=!1){return this._subscriberCounts[e]=this._subscriberCounts[e]||0,this._subscribers[e]=this._subscribers[e]||{},this._subscribers[e][this._subscriberCounts[e]]=t,r&&!["push","remove","mutation","setAt"].includes(e)&&t(this.value),this._subscriberCounts[e]++}unsubscribe(e,t){delete this._subscribers[e][t]}update(e){this._dead||(this.value=e,this._sendEvent("update",e))}refresh(){this._sendEvent("refresh",this.value)}_sendEvent(e,t){if(!this._dead){this._subscribers[e]=this._subscribers[e]||{};for(let r in Object.keys(this._subscribers[e]))this._subscribers[e][r](t)}}dispose(){this._dead=!0,this._subscribers={},this._subscriberCounts={}}},d=class extends o{constructor(e){super(e)}clear(){this.update([])}push(e){this.value.push(e),this._sendEvent("push",{value:e,idx:this.value.length-1})}remove(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this._sendEvent("remove",{value:this.value.splice(e,1)[0],idx:e})}get(e){if(e<0||e>this.value.length)throw new RangeError("Invalid index.");return this.value instanceof Array&&this.value[e]}setAt(e,t){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this.value[e]=t,this._sendEvent("mutation",{value:t,idx:e})}get length(){return this.value.length}},O=(s,e={})=>{let t=new RegExp("\\\\({{\\s*"+Object.keys(e).join("|")+"\\s*}})","gi");return new RegExp(Object.keys(e).join("|"),"gi"),s.replace(new RegExp("(^|[^\\\\]){{\\s*("+Object.keys(e).join("|")+")\\s*}}","gi"),function(r,n,i){return`${n||""}${e[i]}`}).replace(t,"$1")},b=(s,e={},t=!0)=>{let r=Object.assign({},e);return t&&(r=Object.fromEntries(Object.entries(r).map(([n,i])=>[n,l(i)]))),O(s,r)},A=(s,e=!0)=>t=>b(s,t,e),l=s=>s?s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"",C=s=>{if(!s)return"";let e=/&(?:amp|lt|gt|quot|#(0+)?39);/g,t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return s.replace(e,r=>t[r]||"'")},w=s=>globalThis.addEventListener("DOMContentLoaded",s),x=(s,e=document)=>e.querySelector(s),k=(s,e=document)=>Array.from(e.querySelectorAll(s)),y=s=>s.remove(),R=s=>{for(;s.lastChild;)s.removeChild(s.lastChild)},q={Store:o,ListStore:d,nu:E,mustache:b,template:A,escape:l,unescape:C,extend:h,insert:j,empty:R,rm:y,selectAll:k,select:x,onload:w};export{d as ListStore,o as Store,q as default,R as empty,l as escape,h as extend,j as insert,b as mustache,E as nu,w as onload,y as rm,x as select,k as selectAll,A as template,C as unescape};
