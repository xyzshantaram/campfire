<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>campfire: a cozy web framework</title>
    <link rel="stylesheet" href="site/style.css">
    <link rel="shortcut icon" type="image/jpg" href="campfire.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body>#app {
            width: 60%;
            max-width: 80ch;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: 'Inconsolata', 'SF Mono', monospace;
            background: #001d3a;
            color: #f5f4f0;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            width: 100%;
            color: #ff9a00;
        }

        @media screen and (max-aspect-ratio: 1/1) {
            body>#app {
                width: 80%;
            }
        }

        @media screen and (max-aspect-ratio: 9/14) {
            body>#app {
                width: 100%;
            }
        }

        noscript {
            text-align: center;
            font-size: 1.4rem;
        }

        a,
        a:link,
        a:visited {
            text-decoration: none;
            border-bottom: 2px dashed;
            padding-bottom: 0.1rem;
        }

        .cf-site-div {
            display: none;
            margin-top: 2rem;
            margin-bottom: 1rem;
            width: 100%;
        }

        code {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 0.2rem;
            font-family: 'Inconsolata', monospace;
            border-radius: 4px;
        }

        #app>h1>code {
            background-color: inherit;
        }

        .footer {
            width: 100%;
            text-align: center;
            font-size: 0.8rem;
            margin-top: 2rem;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
            padding-top: 1rem;
            line-height: 1;
        }

        .footer a {
            margin: 0.2rem;
        }

        #mask {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            background: rgba(0, 29, 58, 0.8);
            backdrop-filter: blur(4px);
            color: white;
            align-items: center;
            justify-content: center;
            display: flex;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div id='app'>
        <h1>campfire</h1>
        <noscript>
            I'd love to make this site work without JS enabled, but seeing as how this is meant to be a demonstration
            for a JS framework... you'll have to turn on scripts. Sorry for the inconvenience.
        </noscript>

        <!-- Embedded content for SEO - will be hidden/shown by JavaScript -->
        <div class="cf-site-div" data-heading="home" style="display: none;">
            <h3>campfire: a cozy web framework</h3>
            <p><strong>Campfire</strong> is a collection of small utilities to make developing with vanilla JS easy.</p>
            <p>It is kept lightweight on purpose, aiming to provide the bare minimum necessary to make development
                easier.</p>
            <h4>Features</h4>
            <ul>
                <li>Small size</li>
                <li>Easy to get started with - just <code>import</code> it into your project from
                    <a href="https://unpkg.com/browse/campfire.js/">unpkg</a> or
                    <a href="https://esm.sh/campfire.js/">esm.sh</a>.
                    Campfire is on npm as well, so you can also add it into your existing application
                    with <code>npm i campfire.js</code>!
                </li>
                <li>Uses vanilla JS wherever possible - no unnecessary DSLs or abstractions!</li>
                <li>Provides an easy-to-understand API for implementing reactive data</li>
                <li>Provides simple helpers for mustache templating</li>
            </ul>
            <h4>FAQs</h4>
            <details>
                <summary>
                    How does it compare to $framework?
                </summary>
                <p>
                    It doesn't. Campfire and $framework have entirely different goals. Campfire is a library
                    to make writing vanilla JS applications easier, if you don't want the level of abstraction (or
                    the associated overhead) that comes with $framework. You can build entire applications with it
                    or add it quickly to an existing project. You are afforded complete control over your project.
                </p>
                <p>
                    The learning curve is minuscule and the possibilities are endless.
                </p>
            </details>
            <details>
                <summary>
                    What about WebComponents?
                </summary>
                <p>
                    <a href='https://lit.dev'>lit.dev</a>
                </p>
            </details>
            <details>
                <summary>
                    How do I create and share reusable components?
                </summary>
                <p>
                    Campfire has no opinion on how you should do this.
                    However, one option is to use a function that returns functions and stores to let you
                    manipulate the element (and the created element itself).
                </p>

                <pre class='microlight'><code>// a reactive representation of a name badge
const NameBadge = () => {
  const name = cf.store({ value: "" });
  
  const [badge] = cf.nu('div')
    .content(({ name }) => `Hello! My name is ${name}`)
    .deps({ name })
    .done();

  return [badge, name];
}
</code></pre>
            </details>
            <details>
                <summary>
                    Why are escape and unescape so basic?
                </summary>
                <p>
                    <code>escape</code> and <code>unescape</code> are intended as basic HTML sanitizers mainly for
                    setting element contents, etc. You are encouraged to use a different HTML sanitizer if you
                    need more functionality.
                </p>
                <ul>
                    <li><a href='https://github.com/mathiasbynens/he'>he</a></li>
                    <li><a href='https://github.com/apostrophecms/sanitize-html'>html-sanitize</a></li>
                </ul>
            </details>
            <p><a href="?tab=get">Get campfire today!</a></p>
        </div>

        <div class="cf-site-div" data-heading="playground" style="display: none;">
            <h3>try before you buy</h3>
            <p>Try one of these demos, or do your own thing!</p>
            <ul id='playground-demo-list'>
            </ul>
            <div id='cf-editor-controls'>
                <a href='javascript:void(0)' id='cf-editor-clear'>Clear All</a>
                <a href='javascript:void(0)' id='cf-editor-dl'>Download</a>
            </div>
            <div class='editor-wrapper'>
                <div class='cf-editor-html'></div>
                <div class='cf-editor-css'></div>
                <div class='cf-editor-js'></div>
                <div class='cf-editor-output'></div>
            </div>
        </div>

        <div class="cf-site-div" data-heading="docs" style="display: none;">
            <h3>using campfire 4.0.0</h3>
            <p>View the <a href="site/docs/modules/campfire.html">full API reference</a> for detailed descriptions
                of the methods and classes provided by Campfire.</p>

            <h4>quick reference</h4>
            <p>Campfire provides the following methods and classes:</p>

            <details>
                <summary><code>nu()</code> - element creation helper</summary>
                <p>Creates a new DOM element with a fluent builder API.</p>
                <pre class="microlight"><code>// Creating a simple element
const [div] = cf.nu('div')
  .content('Hello World')
  .attr('id', 'greeting')
  .done();

// Creating a button with click handler
const [button] = cf.nu('button#submit.primary')
  .content('Submit')
  .attr('type', 'submit')
  .on('click', () => console.log('Clicked!'))
  .style('backgroundColor', 'blue')
  .done();

// Element with classes
const [card] = cf.nu('.card.shadow')  // Creates div by default
  .content('Card content')
  .done();

// Element with reactive content
const name = cf.store({ value: 'John' });

const [greeting] = cf.nu('h1')
  .content(({ name }) => `Hello, ${name}!`)
  .deps({ name })
  .done();

// Updates when store changes
name.update('Alice');</code></pre>
            </details>

            <details>
                <summary><code>store()</code> - reactive data stores</summary>
                <p>Creates reactive data stores to manage state with automatic UI updates.</p>

                <pre class="microlight"><code>// Simple value store
const counter = cf.store({ value: 0 });
counter.update(5);  // Sets value to 5
counter.value;      // Gets current value (5)

// Subscribe to changes
counter.subscribe((event) => {
  console.log(`Value changed to ${event.value}`);
});

// List store for arrays
const todoList = cf.store({ type: 'list', value: ['Buy milk'] });
todoList.push('Walk dog');  // Adds to the end
todoList.remove(0);         // Removes first item
todoList.clear();           // Empties the list

// Map store for key-value data
const user = cf.store({ 
  type: 'map', 
  value: { name: 'John', age: 30 } 
});
user.set('location', 'New York');  // Add/update a property
user.delete('age');                // Remove a property
user.clear();                      // Empty the map

// Subscribe to all events with any()
todoList.any((event) => {
  console.log(`Event type: ${event.type}`);
});</code></pre>
            </details>

            <details>
                <summary><code>select()</code> - element selection</summary>
                <p>Selects elements from the DOM with a unified API.</p>

                <pre class="microlight"><code>// Select a single element (returns an array with one item)
const [header] = cf.select({ s: '#page-header' });

// Select from a specific parent element
const [submitButton] = cf.select({
  s: 'button[type="submit"]',
  from: formElement
});

// Select multiple elements
const paragraphs = cf.select({
  s: 'p',
  all: true
});

// Combining with other operations
cf.select({ s: '.cards', all: true }).forEach(card => {
  cf.extend(card, { style: { border: '1px solid black' } });
});</code></pre>
            </details>

            <details>
                <summary><code>insert()</code> - element insertion</summary>
                <p>Inserts elements into the DOM at specific positions.</p>

                <pre class="microlight"><code>// Insert at the end of a container
cf.insert([elt], { into: container });

// Insert at the start of a container
cf.insert([elt], { into: container, at: 'start' });

// Insert before (as siblings of) another element
cf.insert([elt], { before: referenceElement });

// Insert multiple elements after (as siblings of) another element
cf.insert([elt1, elt2], { after: referenceElement });

// Create and insert in one step
cf.insert(cf.nu().content('New content').done(), { into: document.body });</code></pre>
            </details>

            <details>
                <summary><code>html()</code> - auto-escaping template literal</summary>
                <p>Creates HTML strings with automatic escaping of interpolated values.</p>

                <pre class="microlight"><code>// Basic usage with automatic escaping
const username = '&lt;script&gt;alert("XSS")&lt;/script&gt;';
const greeting = cf.html`Hello, ${username}!`;
// Result: "Hello, &amp;lt;script&amp;gt;alert("XSS")&amp;lt;/script&amp;gt;!"

// Use r() to disable escaping for trusted content
const trusted = cf.r('"&lt;b&gt;Bold text&lt;/b&gt;"');
const message = cf.html`Safe message: ${trusted}`;
// Result: "Safe message: "&lt;b&gt;Bold text&lt;/b&gt;""

// Use with element creation
const [div] = cf.nu('div')
    // .html() sets .raw(true) internally
  .html(cf.html`<h1>Title</h1><p>${userName}</p>`)
  .done();</code></pre>
            </details>

            <details>
                <summary><code>mustache()</code> and <code>template()</code> - reusable and composable string templates
                </summary>
                <p>Simple templating system for string interpolation.</p>

                <pre class="microlight"><code>// Basic mustache templating (escaped by default)
const result = cf.mustache("Hello, {{ name }}!", { name: "John" });
// Result: "Hello, John!"

// With HTML content (escaped by default)
const result = cf.mustache("Welcome, {{ user }}!", { user: "&lt;b&gt;Admin&lt;/b&gt;" });
// Result: "Welcome, &amp;lt;b&amp;gt;Admin&amp;lt;/b&amp;gt;!"

// Disable escaping for trusted content
const result = cf.mustache(
  "Welcome, {{ userName }}!", { userName: "&lt;b&gt;Admin&lt;/b&gt;" }, 
  false // disable escaping
);
// Result: "&lt;b&gt;Admin&lt;/b&gt;"

// Create reusable template function
const greet = cf.template("Hello, {{ name }}!");
const aliceGreeting = greet({ name: "Alice" });  // "Hello, Alice!"
const bobGreeting = greet({ name: "Bob" });    // "Hello, Bob!"</code></pre>
            </details>

            <details>
                <summary><code>extend()</code> - element modification</summary>
                <p>Modifies existing DOM elements with the same options as <code>nu()</code>.</p>

                <pre class="microlight"><code>// Basic usage 
const element = document.querySelector('#my-element');
cf.extend(element, {
  contents: 'New content',
  style: { color: 'red', fontSize: '16px' }
});

// Add event handlers
cf.extend(element, {
  on: {
    click: () => console.log('Clicked!'),
    mouseover: () => element.style.opacity = '0.8'
  }
});

// With reactive data
const titleStore = cf.store({ value: 'Initial Title' });

cf.extend(pageHeader, {
  contents: ({ title }) => `Page: ${title}`,
  deps: { title: titleStore }
});</code></pre>
            </details>

            <details>
                <summary><code>empty()</code> and <code>rm()</code> - element cleanup</summary>
                <p>Remove elements or their contents from the DOM.</p>

                <pre class="microlight"><code>// Empty an element (removes all children)
cf.empty(container);

// Remove element entirely
cf.rm(element);</code></pre>
            </details>

            <details>
                <summary><code>escape()</code> and <code>unescape()</code> - string sanitization</summary>
                <p>Simple HTML escaping and unescaping utilities. These are the bare minimum for inserting text into the
                    DOM - you should look to a different library for more complex needs.</p>

                <pre class="microlight"><code>// Escape HTML characters
escape("&lt;script&gt;alert('XSS')&lt;/script&gt;") // "&amp;lt;script&amp;gt;alert(&#39;XSS&#39;)&amp;lt;/script&amp;gt;"

// Unescape previously escaped strings
unescape("&amp;lt;script&amp;gt;alert(&#39;XSS&#39;)&amp;lt;/script&amp;gt;") // "&lt;script&gt;alert('XSS')&lt;/script&gt;".
</code></pre>
            </details>

            <details>
                <summary><code>onload()</code> - DOM ready handler</summary>
                <p>Executes code when the DOM is fully loaded.</p>

                <pre class="microlight"><code>cf.onload(() => {
  // Initialize application
  const [app] = cf.nu('div#app').done();
  cf.insert(app, { into: document.body });
});</code></pre>
            </details>

            <details>
                <summary><code>seq()</code> - sequence generator</summary>
                <p>Generates numerical sequences for iteration.</p>

                <pre class="microlight"><code>// Range from 0 to 5 (exclusive)
cf.seq(5);  // [0, 1, 2, 3, 4]

// Range from 2 to 7 (exclusive)
cf.seq(2, 7);  // [2, 3, 4, 5, 6]

// Range with custom step
cf.seq(1, 10, 2);  // [1, 3, 5, 7, 9]

// Creating multiple elements with seq
cf.seq(5).forEach(i => {
  const [item] = cf.nu('li')
    .content(`Item ${i + 1}`)
    .done();
  cf.insert(item, { into: listElement });
});</code></pre>
            </details>
        </div>

        <div class="cf-site-div" data-heading="get" style="display: none;">
            <h3>turn your dumpster fire into a campfire today!</h3>
            <p>You can include campfire into your site with an import statement, either from a location
                where you are hosting it, or from esm.sh / unkpg.</p>
            <pre class="microlight"><code>import cf from 'https://unpkg.com/campfire.js/';</code></pre>
            <p>or</p>
            <pre class="microlight"><code>import { nu, ListStore } from 'https://unpkg.com/campfire.js/';</code></pre>
            <p>If you use npm and a module bundler, campfire provides both CommonJS and ESM versions that you can
                <code>import</code> or <code>require()</code> to incorporate it into your existing workflow, complete
                with TSDoc hints for
                your editor and TypeScript declarations.
            </p>
            <p>To install:</p>
            <pre class="microlight"><code>$ npm i --save campfire.js</code></pre>
            <p>Then in your project:</p>
            <pre class="microlight"><code>import cf from 'campfire.js';</code></pre>
            <p>or (with CommonJS)</p>
            <pre class="microlight"><code>const cf = require('campfire.js');</code></pre>
            <p>Good luck, and thank you for choosing Campfire!</p>
        </div>

        <div class='footer'>
            <a href='https://github.com/xyzshantaram/campfire'>Campfire on GitHub</a>
            <a href='https://github.com/xyzshantaram/campfire/blob/main/index.html'>This site on GitHub</a>
            <p>
                Campfire is free, open-source software available under <a
                    href='https://github.com/xyzshantaram/campfire/blob/main/LICENSE'>the MIT License</a>.
            </p>
        </div>
    </div>

    <div id='mask'>
        <span>loading...</span>
    </div>

    <script type='module' src='site/editor.js'></script>
    <script type='module' src='site/main.js'></script>
</body>

</html>